# 标签树 (Tag Tree)

## 问题场景

在工作和生活中我们经常需要管理文件, 通常我们的文件存放在不同目录下, 可以形成一个树状结构, 也就是文件树:

```
* root
    * d1
        * file1
    * d2
        * file2
    * file3
```

为了更方便的管理文件, 我们经常需要为各个文件打上标签来进一步对其进行描述, 比如我们可以标签A,B,C,D来表示"紧急","重要","一般","次要"等含义.

```
* root
    * d1
        * file1: A
    * d2
        * file2: B
    * file3: B
```

随着事务变得更加复杂, 有时我们甚至需要多套标签, 比如["A", "B", "C"]是一套标签, ["1", "2", "3"]是另一套标签

```
* root
    * d1
        * file1: A, 2
    * d2
        * file2: B, 2
    * file3: B, 3
```

现在我们需要根据标签来构建新的文件树, 比如先按数字标签分叉, 再按字母标签分叉, 得到一颗新的数

```
* 2
    * A
        * file1
    * B
        * file2
* 3
    * B
        * file3
```

#问题描述

给定一个按照markdown语法描述的带标签的文件树, 如:

```
* root
    * d1
        * file1 <!-- A, 2 -->
    * d2
        * file2 <!-- B, 2 -->
    * file3: <!-- B, 3 -->
```

再给定一个二维标签数组, 如

```
[[A,B,C], [1,2,3]]
```

要求以第一个数组为第一层, 第二个数组为第二层, 重新构建文件树, 并以markdown语法打印输出

```
* A
    * 2
        * file1
* B
    * 2
        * file2
    * 3
        * file3
```

要求:
1. 可以假设文件没有相冲突的标签
2. 缩进用制表符 "\t"表示, 第一层0个制表符, 第二层1一个制表符, 以此类推
3. 二维标签数组中的标签不一定全部用得上. 同组内的标签排序不做要求, 可按照字母表顺序排序


扩展问题:
1. 可以支持除了markdown以外的格式吗, 如html, 在设计程序的时候如何为其他格式留下扩展空间?
2. 除了文件名称, 文件还可以携带很多信息, 比如文件的url, 缩略图等, 这些信息不宜用标签表示, 而且需要在打印文件名称的时候同时显示出来, 在设计程序的时候如何为处理和展示这些额外信息留下扩展空间?
3. 基于上述的标签树, 你能想到哪些值得实现的辅助功能? 比如按标签过滤文件树, 过滤某个子文件夹下的文件等

---
注: 2021/08/31 以上问题均已得到初步解决, 可参考当日代码, 支持了markdown的输入输出, 实现了最核心的算法, 包括路径, 文件信息, 标签的解析, 结果的渲染, 按给定2维标签表过滤和重新排序等算法. 关键的算法难度大约在LeetCode Hard级别的
中等偏易的水平, 可能仍有优化的空间, 不过应该很难突破当前的时间复杂度了. 目前来说markdown语法是很好的输出形式, 但主要问题是仍然需要用户手码一份最初的markdown来
记录文件信息, 不算很方便. 目前计划实现的下一步的是添加磁盘扫描的功能, 可以直接把磁盘上的文件和文件夹扫描成文件树, 自动生成一份初始的markdown文件供用户编辑
这样用户就只需要直接加标签了.关于文件信息的读取, 主要是调各种系统API, 目前也还没有明确的use case, 就不打算优先实现了. 其实很想对接一下网络上的磁盘, 比如Google drive里的文件
最简单的办法就是把整个drive下载到磁盘里之后进行磁盘扫描, 不过那样真的太笨了, 而且还得手动输入每个文件的URI, 才能搞定超链接, Google drive貌似有developer API, 不知道能不能弄得自动化一点.
但无论如何是逃不开身份验证的问题了. 其实就算成功对接了Google drive, 可用性也依然不高, 还是需要人手维护更新, 感觉一般人还是不会愿意花时间去做这样的事情, anyway, 我打算做到Google Drive那一步以后就
停止这个项目的开发了, 最多再写一点点用户文档和demo之类的, 反正对于个人而言, 做到这一步已经足够让我管理文档的效率提升10倍以上了, 自己造的轮子, 开起来就是舒服啊:-). 等用一段时间看有没有什么问题值得改进或者有什么新的idea, 再接着开发吧.
